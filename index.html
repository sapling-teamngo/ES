<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hayyan Quarries - Field Trip 2</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            overflow: hidden;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            padding: 1rem 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 0.3rem;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .date {
            font-size: 0.9rem;
            margin-top: 0.2rem;
            color: #bdc3c7;
        }
        
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        #map {
            flex: 1;
            height: 100%;
            z-index: 1;
        }
        
        .sidebar {
            width: 300px;
            background-color: white;
            border-left: 1px solid #ddd;
            display: flex;
            flex-direction: column;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            z-index: 2;
            padding: 1rem;
        }
        
        .coordinates-panel {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .coordinates-panel h3 {
            margin-bottom: 1rem;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .coordinates-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }
        
        .coordinate-item {
            display: flex;
            flex-direction: column;
        }
        
        .coordinate-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: #495057;
            margin-bottom: 0.25rem;
        }
        
        .coordinate-value {
            font-size: 0.9rem;
            color: #2c3e50;
            background: white;
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid #e9ecef;
        }
        
        .scale-info {
            font-size: 1rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .quarry-list {
            flex: 1;
            overflow-y: auto;
        }
        
        .quarry-item {
            background-color: white;
            border: 1px solid #e1e8ed;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quarry-item:hover {
            background-color: #f8f9fa;
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .quarry-item.active {
            background-color: #e1f0fa;
            border-color: #3498db;
        }
        
        .quarry-name {
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .quarry-coords {
            font-size: 0.85rem;
            color: #7f8c8d;
        }
        
        .legend {
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            padding: 0.75rem;
            margin-top: 1rem;
        }
        
        .legend h4 {
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 0.5rem;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .map-controls {
            position: absolute;
            top: 100px;
            right: 20px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            padding: 0.5rem;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }
        
        .control-btn {
            padding: 0.5rem;
            margin: 0.25rem;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .control-btn:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Hayyan Quarries - Field Trip 2</h1>
            <div class="subtitle">Interactive Map with Dynamic Coordinates</div>
            <div class="date">Date: 24th of October 2025</div>
        </header>
        
        <div class="main-content">
            <div id="map"></div>
            
            <div class="sidebar">
                <div class="coordinates-panel">
                    <h3><i class="fas fa-map-marker-alt"></i> Corner Coordinates</h3>
                    <div class="coordinates-grid">
                        <div class="coordinate-item">
                            <div class="coordinate-label">NW</div>
                            <div class="coordinate-value" id="nw-coord">32.29353°, 36.10995°</div>
                        </div>
                        <div class="coordinate-item">
                            <div class="coordinate-label">NE</div>
                            <div class="coordinate-value" id="ne-coord">32.29288°, 36.2088°</div>
                        </div>
                        <div class="coordinate-item">
                            <div class="coordinate-label">SW</div>
                            <div class="coordinate-value" id="sw-coord">32.24286°, 36.11005°</div>
                        </div>
                        <div class="coordinate-item">
                            <div class="coordinate-label">SE</div>
                            <div class="coordinate-value" id="se-coord">32.24695°, 36.2087°</div>
                        </div>
                    </div>
                </div>
                
                <div class="scale-info">
                    <i class="fas fa-ruler"></i> Scale: <span id="scale-value">1:25000</span>
                </div>
                
                <div class="quarry-list" id="quarry-list">
                    <!-- Quarry items will be populated by JavaScript -->
                </div>
                
                <div class="legend">
                    <h4>Legend</h4>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e74c3c;"></div>
                        <span>Day 2 Quarries</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #3498db;"></div>
                        <span>Day 1 Quarries</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #2c3e50;"></div>
                        <span>Quarries</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #f39c12;"></div>
                        <span>Main Roads</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="map-controls">
            <button class="control-btn" id="zoom-in">
                <i class="fas fa-search-plus"></i>
            </button>
            <button class="control-btn" id="zoom-out">
                <i class="fas fa-search-minus"></i>
            </button>
            <button class="control-btn" id="reset-view">
                <i class="fas fa-globe"></i>
            </button>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // Initialize the map with the exact same view as the original image
        const map = L.map('map').setView([32.268, 36.159], 13);
        
        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Add the original map boundary rectangle
        const originalBounds = [
            [32.29353, 36.10995], // NW
            [32.24286, 36.2087]   // SE
        ];
        
        // Create a rectangle to show the original map area
        L.rectangle(originalBounds, {
            color: "#ff7800",
            weight: 2,
            fillOpacity: 0.05
        }).addTo(map);

        // Quarry data from the image
        const quarries = [
            { id: "day1-quarry1", name: "Day 1: Quarry 1", lat: 32.26054, lng: 36.15565, day: 1 },
            { id: "day1-quarry2", name: "Day 1: Quarry 2", lat: 32.25714, lng: 36.15712, day: 1 },
            { id: "day1-quarry3", name: "Day 1: Quarry 3", lat: 32.26052, lng: 36.15644, day: 1 },
            { id: "day2-quarry1", name: "Day 2: Quarry 1", lat: 32.27659, lng: 36.14886, day: 2 },
            { id: "day2-quarry2", name: "Day 2: Quarry 2", lat: 32.27537, lng: 36.14820, day: 2 }
        ];

        // Add quarry markers to the map
        const markers = {};
        quarries.forEach(quarry => {
            const color = quarry.day === 1 ? '#3498db' : '#e74c3c';
            
            // Create custom icon
            const customIcon = L.divIcon({
                className: 'custom-marker',
                html: `<div style="background-color:${color}; width:20px; height:20px; border-radius:50%; border:3px solid white; box-shadow:0 2px 5px rgba(0,0,0,0.3);"></div>`,
                iconSize: [26, 26],
                iconAnchor: [13, 13]
            });
            
            // Create marker
            const marker = L.marker([quarry.lat, quarry.lng], { icon: customIcon }).addTo(map);
            
            // Create popup content
            const popupContent = `
                <h3>${quarry.name}</h3>
                <p><strong>Coordinates:</strong> ${quarry.lng.toFixed(5)}°, ${quarry.lat.toFixed(5)}°</p>
                <p><strong>Field Trip Day:</strong> ${quarry.day}</p>
            `;
            
            marker.bindPopup(popupContent);
            markers[quarry.id] = marker;
            
            // Add click event to marker
            marker.on('click', function() {
                highlightQuarry(quarry.id);
            });
        });

        // Function to update corner coordinates and scale
        function updateInfo() {
            const mapBounds = map.getBounds();
            const zoom = map.getZoom();
            
            // Update corner coordinates
            document.getElementById('nw-coord').textContent = 
                `${mapBounds.getNorth().toFixed(5)}°, ${mapBounds.getWest().toFixed(5)}°`;
            document.getElementById('ne-coord').textContent = 
                `${mapBounds.getNorth().toFixed(5)}°, ${mapBounds.getEast().toFixed(5)}°`;
            document.getElementById('sw-coord').textContent = 
                `${mapBounds.getSouth().toFixed(5)}°, ${mapBounds.getWest().toFixed(5)}°`;
            document.getElementById('se-coord').textContent = 
                `${mapBounds.getSouth().toFixed(5)}°, ${mapBounds.getEast().toFixed(5)}°`;
            
            // Update scale based on zoom level
            let scale;
            if (zoom <= 10) scale = "1:500000";
            else if (zoom === 11) scale = "1:250000";
            else if (zoom === 12) scale = "1:100000";
            else if (zoom === 13) scale = "1:50000";
            else if (zoom === 14) scale = "1:25000";
            else if (zoom === 15) scale = "1:10000";
            else if (zoom === 16) scale = "1:5000";
            else scale = "1:2500";
            
            document.getElementById('scale-value').textContent = scale;
        }

        // Function to render quarry list
        function renderQuarryList() {
            const quarryList = document.getElementById('quarry-list');
            quarryList.innerHTML = '';
            
            quarries.forEach(quarry => {
                const quarryItem = document.createElement('div');
                quarryItem.className = 'quarry-item';
                quarryItem.setAttribute('data-id', quarry.id);
                
                const color = quarry.day === 1 ? '#3498db' : '#e74c3c';
                
                quarryItem.innerHTML = `
                    <div class="quarry-name">
                        <div class="legend-color" style="background-color:${color};"></div>
                        ${quarry.name}
                    </div>
                    <div class="quarry-coords">${quarry.lng.toFixed(5)}°, ${quarry.lat.toFixed(5)}°</div>
                `;
                
                quarryItem.addEventListener('click', function() {
                    highlightQuarry(quarry.id);
                });
                
                quarryList.appendChild(quarryItem);
            });
        }

        // Function to highlight quarry
        function highlightQuarry(quarryId) {
            // Remove active class from all quarry items
            document.querySelectorAll('.quarry-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to selected quarry
            const quarryItem = document.querySelector(`.quarry-item[data-id="${quarryId}"]`);
            if (quarryItem) {
                quarryItem.classList.add('active');
            }
            
            // Open popup for the selected quarry
            if (markers[quarryId]) {
                markers[quarryId].openPopup();
            }
        }

        // Set up event listeners
        function setupEventListeners() {
            // Update info when map moves or zooms
            map.on('moveend', updateInfo);
            map.on('zoomend', updateInfo);
            
            // Map control buttons
            document.getElementById('zoom-in').addEventListener('click', function() {
                map.zoomIn();
            });
            
            document.getElementById('zoom-out').addEventListener('click', function() {
                map.zoomOut();
            });
            
            // Reset view button - goes back to original coordinates and scale
            document.getElementById('reset-view').addEventListener('click', function() {
                map.setView([32.268, 36.159], 13);
            });
        }

        // Initialize the application
        function initApp() {
            // Initial update of coordinates and scale
            updateInfo();
            
            // Render quarry list
            renderQuarryList();
            
            // Set up event listeners
            setupEventListeners();
        }

        // Initialize the application when the page loads
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
